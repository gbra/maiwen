import os, sys
import math
from utils.termcolor import colored

from analysis import Analysis

from data.data_structures import *
		
class RMA_MAST(Analysis):

   def __init__(self):
	print  colored(' ' * self._indentation,"--> Setting of the analysis : RTA post", self._color)

   def analysis(self,model):
	print  colored(' ' * self._indentation, "--> Analysis execution : RMA with MAST tool", self._color)
	print  colored(' ' * self._indentation,"    **Executing OCARINA...", self._color)
	cmd="ocarina -aadlv2 -g mast -r"
	instance="rma.impl"
	path=os.getcwd()+"/"
	list_of_files=["processor_properties.aadl", "processors.aadl", "deployment.aadl", "rma.aadl"]
	to_exec_file=""
	for f in list_of_files :
		to_exec_file+=path+f+" "
	os.system(cmd+" "+instance+" " +to_exec_file)	
	os.system("mast_analysis classic_rm mast-model.txt")
